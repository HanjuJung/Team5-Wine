"use client";

import React, { useEffect, useState } from 'react';
import GNB from '@/components/gnb/GNB';
import { wineDetail } from "@/api/Wine";
import { wineDetailType } from "@/types/WineProps";
import RatingStart from '@/components/ratingstart/RatingStart';

const App: React.FC = () => {
    const [detail, setDetail] = useState<wineDetailType>();
    const [size, setSize] = useState<'L' | 'S'>('L');

    useEffect(() => {
        const fetchWineMy = async () => {
            try {
                const response = await wineDetail(35);
                setDetail(response);
                console.log(response);
            } catch (error) {
                console.error("Error fetching wine list:", error);
            }
        };

        fetchWineMy();

        const handleResize = () => {
            if (window.innerWidth <= 768) {
                setSize('S');
            } else {
                setSize('L');
            }
        };

        window.addEventListener('resize', handleResize);
        handleResize(); // 초기 크기 설정

        return () => {
            window.removeEventListener('resize', handleResize);
        };
    }, []);

    return (
        <>
            <GNB />
            {detail && (
                <RatingStart
                    size={size}
                    //여기에 필요한 값 알아서 입력해서 쓰면 됨 (미리 지정해놓은 값들 중에서)
                    starSize={size === 'L' ? 17 : 12}
                    avgRating={detail.avgRating}
                    reviewCount={detail.reviewCount}
                />
            )}
        </>
    );
};

export default App;
